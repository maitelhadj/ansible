---
- name: "Deploy Apache Container"
  hosts: "prod"
  tasks:
    - name: "Install ca-certificates"
      apt:
        name: ca-certificates
        update_cache: yes
      become: yes
    - name: "Install curl"
      apt:
        name: curl
        update_cache: yes
      become: yes
    - name: "Install gnupg"
      apt:
        name: gnupg
        update_cache: yes
      become: yes
    - name: "Install lsb-release"
      apt:
        name: lsb-release
        update_cache: yes
      become: yes
    - name: "Add Dockerâ€™s official GPG key"
      command:
        cmd: "curl -fsSL https://download.docker.com/linux/debian/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg"
      become: yes
    - name: "Install docker-ce"
      apt:
        name: docker-ce
        update_cache: yes
      become: yes
    - name: "Install docker-ce-cli"
      apt:
        name: docker-ce-cli
        update_cache: yes
      become: yes
    - name: "Install containerd.io"
      apt:
        name: containerd.io
        update_cache: yes
      become: yes
    - name: "Start service Docker if not"
      service:
        name: docker
        state: started
      become: yes
